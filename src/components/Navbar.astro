---
import { t } from 'i18next';
import { localizePath } from 'astro-i18next';

const menus = [
  {
    label: t('header.navHome'),
    href: localizePath('/'),
  },
  {
    label: t('header.navStories'),
    href: localizePath('/stories'),
  },
    {
    label: t('header.navCodex'),
    href: localizePath('/codex'),
  },
  {
    label: t('header.navResources'),
    href: null,
    children: [
      {
        label: t('header.navBooks'),
        href: localizePath('/books'),
      },
      {
        label: t('header.navTopics'),
        href: localizePath('/topics'),
      },
    ],
  },
  {
    label: t('header.navProjects'),
    href: null,
    children: [
      {
        label: t('header.navPublish'),
        href: localizePath('/publications'),
      },
      {
        label: t('header.navLibrary'),
        href: 'https://library.otibeguni.com/',
      },
      {
        label: t('header.navGallery'),
        href: 'https://art.otibeguni.com/',
      },
    ],
  },
  {
    label: t('header.navAbout'),
    href: localizePath('/about'),
  },
];
---

<div class="drawer">
  <input id="my-drawer-3" type="checkbox" class="drawer-toggle" />
  <div class="drawer-content flex flex-col">
    <!-- Navbar -->
    <nav class="navbar bg-primary text-primary-content">
      <div class="container mx-auto flex max-w-3xl items-center">
        <div class="flex-none">
          <label
            for="my-drawer-3"
            aria-label="open sidebar"
            class="btn btn-square btn-ghost"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              class="inline-block h-6 w-6 stroke-current"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </label>
        </div>
        <div class="mx-auto flex-1 items-center justify-between">
          <a href={localizePath('/')} class="btn btn-primary text-xl font-bold">
            Otibeguni
          </a>
        </div>
      </div>
    </nav>
  </div>
  <div class="drawer-side">
    <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"
    ></label>
    <ul class="menu bg-base-200 min-h-full w-80 p-4">
      <!-- Sidebar content here -->
      {
        menus.map((menu) => (
          <li>
            {menu.href ? (
              <a href={menu.href}>{menu.label}</a>
            ) : (
              <details open>
                <summary>{menu.label}</summary>
                <ul>
                  {menu.children?.map((child) => (
                    <li>
                      <a href={child.href}>{child.label}</a>
                    </li>
                  ))}
                </ul>
              </details>
            )}
          </li>
        ))
      }
    </ul>
  </div>
</div>
